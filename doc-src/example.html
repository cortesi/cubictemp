

<h1> An Example </h1>

<p>What follows is a short example of how repeat blocks and tags might be
employed together in an actual template. Say we need to dynamically generate a
select input field. First, we construct a general template for a simple select
field:</p>

<!--(block|cubescript|htmlSyntax)-->
    <select>
    <!--(_for option in ["Elephants", "Buffaloes", "Hippopotami", "Rhinoceri"])-->
        <option>
            @_!option!@
        </option>
    <!--(_end)-->
    </select>
<!--(end)-->

<p> Notice that we have chosen our block flavour so that the HTML in the raw
template is well-formed. This means that we can simply view the raw template in
a web-browser while we edit, to check that the output (sans repeats and
substitutions) is what we want:</p>

<pre>
<!--(block|cubescript)-->
    <select>
    <!--(_for option in ["Elephants", "Buffaloes", "Hippopotami", "Rhinoceri"])-->
        <option>
            @_!option!@
        </option>
    <!--(_end)-->
    </select> 
<!--(end)-->
</pre>

<p>OK, the template seems to be correct - the list box looks right, and our option
replacement tag appears in the right place. Now we need to combine it with code
to actually do the substitution:</p>

<!--(block|pySyntax)-->
    import cubictemp

    opts = ["Elephants", "Buffaloes", "Hippopotami", "Rhinoceri"]
    temp = cubictemp.File("template", optionList = opts)
    print temp
<!--(end)-->

<p>All of this combined, produces the lovely select box shown below:</p>

<pre>
<select>
<!--(for opt in ["Elephants", "Buffaloes", "Hippopotami", "Rhinoceri"])-->
	<option>
		@!opt!@
	</option>
<!--(end)-->
</select> 
</pre>


<h1>Conditionals</h1>

<p> What happens if we need to pre-select one of our options? This would
involve inserting our normal options as above, but making a different
replacement for the pre-selected option. This type of operation can be
performed using the blocks combined with Python's native conditional
expressions.</p>

<p> Before constructing the template for a select box with a pre-selected
option, let's modify the Python code snippet from the previous example to pass
the value of the selected option into our template: </p>

<!--(block|pySyntax)-->
import cubictemp

opts = [
    "Elephants",
    "Buffaloes",
    "Hippopotami",
    "Rhinoceri",
]
temp = cubictemp.Temp(s, optionList=opts, selected="Elephants")
print temp
<!--(end)-->

<p> Our template can now be changed as follows:</p>

<!--(block|cubescript|htmlSyntax)-->
<select>
<!--(_for opt in optionList)-->
  <option @_!"selected" if (opt == selected) else ""!@>
        @_!opt!@
    </option>
<!--(_end)-->
</select>  
<!--(end)-->
