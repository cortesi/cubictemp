
<h1> Tags and Expressions </h1>

<p> Cubictemp evaluates everything between the substitution delimiters 

<!--(block|cubescript)-->
- @_!...!@ and $_!...!$ -
<!--(end)-->

as expressions in the specified namespace. The result of this evaluation is
converted to a string with the built-in function <b>str</b>, and placed in the
template at the appropriate place.</p> 

<p> At this point it is important to distinguish clearly between Python
expressions and Python statements. Python <b>expressions</b> can conveniently
be thought of as anything that can be on the right-hand-side of an equals sign.
Arithmetic operators, boolen operators, parentheses for grouping,
method/function calls, object instantiation and conditional expressions are all
valid components of expressions. Python <b>statements</b>, on the other hand,
include things like <b>while</b>, <b>print</b>, variable assignment and full
<b>if</b> blocks. Cubictemp allows <b>only expressions</b> in places where it
evaluates Python code. This is a deliberate choice - limiting templates to
expressions ensures that program logic lives in the Python program files where
they belong. This enforces a hard separation between code and presentation,
making it easier to unit-test, change and maintain the application as a
whole.</p>

<p>To illustrate this, take a look at the template below:</p>

<pre>
<!--(block|cubescript)-->
@_!foo!@ times two is @_!foo*2!@
@_!foo!@ squared is @_!foo*foo!@
<!--(end)-->
</pre>

<p> ...and this accompanying code snippet: </p>

<!--(block|pySyntax)-->
import cubictemp
temp = cubictemp.File("template", foo=3)
print temp
<!--(end)-->

<p> The output here would look like this:</p>

<pre>
3 times two is 6
3 squared is 9
</pre>

<p> Similarly, if <b>foo</b> happened to be a dictionary, we could extract a
value from it inside a template like this:</p>

<pre>
<!--(block|cubescript)-->
@_!foo["bar"]!@ 
<!--(end)-->
</pre>

<p> And if <b>"foo"</b> was an object with an attribute <b>"x"</b>, we could
reference the attribute by saying:</p>

<pre>
<!--(block|cubescript)-->
@_!foo.x!@ 
<!--(end)-->
</pre>

<p> This ability to evaluate expressions makes Cubictemp templates very
expressive. </p>


<h2> A special case: conditionals </h2>

<p> Python's conditional expressions are especially handy in templates. Since
this expression type is relatively rarely used, we provide an example of its
use in a tag expression. Evaluating this template:</p>

<pre>
<!--(block|cubescript)-->
@_!"foo" if (1==2) else "bar"!@
<!--(end)-->
</pre>

<p>... will result in: </p>

<pre>
bar
</pre>
